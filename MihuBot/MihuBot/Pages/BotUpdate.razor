@page "/bot-update"
@attribute [Authorize]
@inject DiscordSocketClient discord
@inject IHttpContextAccessor httpContextAccessor
@inject IJSRuntime jsRuntime

@if (httpContextAccessor.HttpContext.User.IsAdmin())
{
    <button class="btn-warning" @onclick="OnBotUpdateAsync">
        <span class="oi oi-loop-circular" aria-hidden="true"></span> Update
    </button>
}

@code
{
    async Task OnBotUpdateAsync()
    {
        bool confirmed = await jsRuntime.InvokeAsync<bool>("confirm", "Are you sure?");
        if (confirmed)
        {
            Program.StartUpdate();
        }
    }
}
